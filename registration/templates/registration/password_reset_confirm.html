{% extends 'core/base.html' %}
{% load static %}
{% block title %}Escriba la nueva contraseña{% endblock %}
{% block section %}
<style>.errorlist{color:red;}</style>
<main role="main">
  <div class="container">
    <div class="row mt-3">
      <div class="col-md-6 mx-auto mb-5">

        {% if validlink %}
          <form action="" method="post">{% csrf_token %}
            <h2 class="mb-4">Escriba la nueva contraseña</h2>
            <p>Por favor, introduzca su contraseña nueva dos veces para verificar que la ha escrito correctamente.</p>
            
            {{form.new_password1.errors}}
            <div class="md-form">
              <i class="fab fa-pied-piper-hat prefix"></i>
              <input type="password" name="new_password1" autofocus required id="id_new_password1" class="form-control" />
              <label for="id_new_password1">Contraseña nueva</label>
            </div>

            {{form.new_password2.errors}}
            <div class="md-form">
              <i class="fas fa-angle-double-right prefix"></i>
              <input type="password" name="new_password2" required id="id_new_password2" class="form-control"/>
              <label for="id_new_password2">Contraseña nueva (confirmación)</label>
            </div>
            
            <button type="submit" class="btn peach-gradient btn-rounded waves-effect mx-auto d-block">Cambiar mi contraseña</button>
          </form>
        {% else %}
          <h3 class="mb-4">Restablecimiento de contraseñas fallido</h3>
          <p>El enlace de restablecimiento de contraseña era inválido, seguramente porque se haya usado antes. Por favor, solicite un nuevo restablecimiento de contraseña <a href="{% url 'password_reset' %}">aquí</a>.</p>
        {% endif %}
      </div>
    </div>
  </div>
</main>
{% endblock %}